# melter_desktop.kv
#:kivy 2.0
#:include Templates/input_output_chooser.kv
#:import InputOutputChooser Templates.input_output_chooser.InputOutputChooser
#:import DropdownButton Templates.dropdown_button.DropdownButton


<Main>:
    name: "main_screen"
    id: main_screen
    TabbedPanel:
        id: test
        title: "Melter"
        do_default_tab: False

        # First tab is for loading data
        TabbedPanelItem:
            id: loading_tab
            text: "Data Loading"

            # UI made up of floating sub-layouts
            FloatLayout:

                # First item is an InputOutputChooser
                InputOutputChooser:
                    id: io_chooser_dataloading
                    size_hint_x: 1.0
                    pos_hint: {"x": 0., "y": 0.875}

                # Second item is a grid layout filled with buttons
                # These buttons denote available functions for loading data
                GridLayout:
                    orientation: "tb-lr"
                    size_hint_x: 0.9
                    size_hint_y: 0.8
                    pos_hint: {"x": 0.05, "y": 0.05}
                    # spacing: 2.
                    cols: 1
                    # This is the button and progress bar for loading data
                    StackLayout:
                        size_hint_y: 0.15
                        orientation: "lr-tb"
                        Button:
                            size_hint_x: 0.25
                            text: "Load Pyrometry Data"
                            on_press: root.load_data()
                        ProgressBar:
                            id: read_layers_progbar
                            size_hint_x: 0.75
                            value: 0.
                        # A button that applies the calibration curve
                        Button:
                            text: "Apply Calibration Curve"
                            size_hint_x: 0.25
                            width: 120
                            on_press: root.apply_calibration_curve()
                        StackLayout:
                            size_hint_x: 0.25
                            size_hint_y: 0.5
                            cols: 1
                            rows: 2
                            # Containing a description of what the field points to
                            Label:
                                halign: "right"
                                text: "Calibration Curve"
                                width: 160
                            # A textbox for cal curve equation entry
                            TextInput:
                                halign: "center"
                                valign: "center"
                                id: calibration_curve
                                readonly: False
                                hint_text: "y = x"
                        ProgressBar:
                            id: cal_curve_progbar
                            size_hint_x: 0.5
                            value: 0.
                    # This label displays current status of data processing
                    Label:
                        id: dataloading_display
                        text: "No data loaded!"
                        halign: "center"
                        valign: "center"

        # Second tab is for detecting & separating samples
        TabbedPanelItem:
            id: detection_tab
            text: "Sample\nDetection"

            # Items are stacked from bottom to top. UI made of floating sub-layouts
            FloatLayout:

                # First item is an InputOutputChooser
                InputOutputChooser:
                    id: io_chooser_sampledetection
                    size_hint_x: 1.0
                    pos_hint: {"x": 0., "y": 0.875}

                # Second item is a grid layout filled with buttons
                # These buttons denote available functions for per sample data
                GridLayout:
                    size_hint_x: 0.9
                    size_hint_y: 0.75
                    pos_hint: {"x": 0.05, "y": 0.05}
                    # spacing: 2.
                    cols: 2
                    Button:
                        text: "Test 5"
                    Button:
                        text: "Test 6"
                    Button:
                        text: "Test 7"
                    Button:
                        text: "Test 8"

        # Third tab is for generating whole buildplate figures
        TabbedPanelItem:
            id: plate_vis_tab
            text: "Buildplate\nVisualization"

            # Items are stacked from bottom to top. UI made of floating sub-layouts
            FloatLayout:

                # First item is an InputOutputChooser
                InputOutputChooser:
                    id: io_chooser_buildplate
                    size_hint_x: 1.0
                    pos_hint: {"x": 0., "y": 0.875}

                # Second item is a grid layout filled with buttons
                # These buttons denote available functions for buildplate plotting
                GridLayout:
                    orientation: "tb-lr"
                    size_hint_x: 0.9
                    size_hint_y: 0.8                # These the buttons and progress bar for the layers_to_figures function
                    pos_hint: {"x": 0.05, "y": 0.05}
                    cols: 1
                    # These the buttons and progress bar for the layers_to_figures function
                    StackLayout:
                        size_hint_x: 1.0
                        size_hint_y: 1.0
                        orientation: "lr-tb"
                    # This button will be a dropdown
                        DropdownButton:
                            id: layers_to_figures_filetype_dropdown
                            text: "select file type\n(png)"
                            size_hint_x: 0.25
                            size_hint_y: 0.15
                        # Right of the dropdown will be a suite of options
                        StackLayout:
                            orientation: "tb-lr"
                            size_hint_x: 0.75
                            size_hint_y: 0.15
                            # Checboxes for toggling plot colouring and colourbars
                            CheckBox:
                                id: layers_to_figures_plot_w
                                active: True
                                size_hint_x: 0.1
                                size_hint_y: 0.5
                            CheckBox:
                                id: layers_to_figures_colorbar
                                active: True
                                size_hint_x: 0.1
                                size_hint_y: 0.5
                            Label:
                                text: "Colour by temperature"
                                size_hint_x: 0.4
                                size_hint_y: 0.5
                            Label:
                                text: "Display colourbar"
                                size_hint_x: 0.4
                                size_hint_y: 0.5
                            # And text input for other figure parameters
                            TextInput:
                                id: layers_to_figures_figureparams
                                size_hint_x: 0.5
                                size_hint_y: 0.5
                                hint_text: "Figure parameters..."
                            TextInput:
                                id: layers_to_figures_plotparams
                                size_hint_x: 0.5
                                size_hint_y: 0.5
                                hint_text: "Plot parameters..."
                        # This button an progress bar trigger and track the
                        # generation of figures
                        Button:
                            text: "Generate static 2d\nbuidplate figures"
                            size_hint_x: 0.25
                            size_hint_y: 0.15
                            on_press: root.layers_to_figures()
                        ProgressBar:
                            id: layers_to_figures_progbar
                            size_hint_x: 0.75
                            size_hint_y: 0.15
                            value: 0.
                        # These the buttons and progress bar for the layers_to_figures function
                        StackLayout:
                            size_hint_x: 1.0
                            size_hint_y: 0.15
                            orientation: "lr-tb"
                            # This button will be a dropdown
                            DropdownButton:
                                id: layers_to_3dplot_filetype_dropdown
                                text: "select file type\n(png)"
                                size_hint_x: 0.25
                                size_hint_y: 0.15
                            # Right of the dropdown will be a suite of options
                            StackLayout:
                                orientation: "tb-lr"
                                size_hint_x: 0.75
                                size_hint_y: 0.15
                                # Checboxes for toggling plot colouring and colourbars
                                CheckBox:
                                    id: layers_to_3dplot_plot_w
                                    active: True
                                    size_hint_x: 0.1
                                    size_hint_y: 0.5
                                CheckBox:
                                    id: layers_to_3dplot_colorbar
                                    active: True
                                    size_hint_x: 0.1
                                    size_hint_y: 0.5
                                Label:
                                    text: "Colour by temperature"
                                    size_hint_x: 0.4
                                    size_hint_y: 0.5
                                Label:
                                    text: "Display colourbar"
                                    size_hint_x: 0.4
                                    size_hint_y: 0.5
                                # And text input for other figure parameters
                                TextInput:
                                    id: layers_to_3dplot_figureparams
                                    size_hint_x: 0.5
                                    size_hint_y: 0.5
                                    hint_text: "Figure parameters..."
                                TextInput:
                                    id: layers_to_3dplot_plotparams
                                    size_hint_x: 0.5
                                    size_hint_y: 0.5
                                    hint_text: "Plot parameters..."
                            # This button an progress bar trigger and track the
                            # generation of figures
                            Button:
                                text: "Generate static 3d\nbuidplate figures"
                                size_hint_x: 0.25
                                size_hint_y: 0.15
                                on_press: root.layers_to_plot()
                            ProgressBar:
                                id: layers_to_3dplot_progbar
                                size_hint_x: 0.75
                                size_hint_y: 0.15
                                value: 0.

        # Fourth tab is for generating figures
        TabbedPanelItem:
            id: sample_vis_tab
            text: "Per Sample\nVisualization"

            # Items are stacked from bottom to top. UI made of floating sub-layouts
            FloatLayout:

                # First item is an InputOutputChooser
                InputOutputChooser:
                    id: io_chooser_persample
                    size_hint_x: 1.0
                    pos_hint: {"x": 0., "y": 0.875}

                # Second item is a grid layout filled with buttons
                # These buttons denote available functions for per sample data
                GridLayout:
                    size_hint_x: 0.9
                    size_hint_y: 0.75
                    pos_hint: {"x": 0.05, "y": 0.05}
                    # spacing: 2.
                    cols: 2
                    Button:
                        text: "Test 9"
                    Button:
                        text: "Test 10"
                    Button:
                        text: "Test 11"
                    Button:
                        text: "Test 12"
